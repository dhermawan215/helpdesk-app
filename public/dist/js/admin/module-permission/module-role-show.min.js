var Index=function(){const csrf_token=$('meta[name="csrf_token"]').attr("content");var handleTabClick=function(){$(".group-tab-custom").on("click",(function(){const groupValue=$(this).data("group"),moduleValue=$(this).data("module"),panelName=$(this).data("panel");let idButtonName="#btn-update-"+panelName,idFunctionName="#function-field-"+panelName,idAccessName="#is-access-"+panelName,idFormValuesName="#form-values-"+panelName,idGroupValues;$("#group-values-"+panelName).val(groupValue),handleIsAccess(idAccessName),$.ajax({type:"POST",url:url+"/admin/module-permission/module-role/show",data:{_token:csrf_token,uGroup:groupValue,uModule:moduleValue},success:function(response){var responseValue=response.value;$(idAccessName).append($("<option>",{value:responseValue.id,text:responseValue.text,attr:"selected"})),$(idFunctionName).val(responseValue.function),$(idFunctionName).tagsinput(),$(idFormValuesName).val(responseValue.formValue),$(idButtonName).removeAttr("disabled")},error:function(response){toastr.error(response.responseJSON.message),$(idFunctionName).val(""),$(idButtonName).attr("disabled","disabled")}})}))},handleIsAccess=function(idAccessName){var dataIsAccess=[{id:"1",text:"Yes"},{id:"0",text:"No"}];$(idAccessName).select2({allowClear:!0,placeholder:"Select access permission",data:dataIsAccess})},handleSubmitModuleRole=function(){$(".form-module-role").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);confirm("is right?")&&$.ajax({url:url+"/admin/module-permission/module-role/update",type:"POST",data:formData,processData:!1,contentType:!1,success:function(responses){toastr.success(responses.message),setTimeout(()=>{window.location.href=responses.url},4500)},error:function(response){$.each(response.responseJSON,(function(key,value){toastr.error(value)}))}})}))};return{init:function(){handleTabClick(),handleSubmitModuleRole()}}}();$(document).ready((function(){Index.init()}));